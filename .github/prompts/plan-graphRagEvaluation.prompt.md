# Graph RAG 도입 평가

## 현재 시스템 vs Graph RAG

### 현재 이미 보유한 기능들
- ✅ Hybrid Search (BM25 + Dense)
- ✅ HyDE (모호한 쿼리 처리)
- ✅ Corrective RAG (결과 품질 자동 보정)
- ✅ Self-RAG (검색 필요성 판단)
- ✅ Fact Check + Self-Correction
- ✅ 계층적 구조 (`parent_path`: 규정 > 장 > 조)

### Graph RAG가 해결하는 문제

| 문제 유형 | 예시 쿼리 | 현재 시스템 | Graph RAG |
|-----------|----------|------------|-----------|
| **다중 홉 추론** | "휴직 후 복직 시 호봉은?" | △ 여러 청크 필요 | ✅ 관계 탐색 |
| **규정 간 참조** | "A규정 제5조가 인용하는 B규정은?" | ❌ 어려움 | ✅ 엣지 추적 |
| **전체 구조 파악** | "인사 관련 규정 전체 체계?" | △ 제한적 | ✅ 그래프 순회 |
| **단순 조항 검색** | "교원 휴직 기간?" | ✅ 잘 됨 | ✅ 동일 |

---

## 현실적인 분석

### 대학 규정 Q&A의 실제 사용 패턴

| 질문 유형 | 비율 (추정) | 현재 시스템 | Graph RAG |
|-----------|------------|------------|-----------|
| "휴학 어떻게 해요?" | 60% | ✅ 잘 됨 | ✅ 동일 |
| "장학금 조건이요?" | 25% | ✅ 잘 됨 | ✅ 동일 |
| "교원인사규정 제36조" | 10% | ✅ 잘 됨 | ✅ 동일 |
| "A규정이 참조하는 B규정의 C조항과 연결된 D세칙은?" | **< 5%** | △ 어려움 | ✅ 강점 |

**95% 이상의 질문은 현재 시스템으로 충분합니다.**

---

### Graph RAG의 실제 비용

```
도입 비용:
├── 개발: 2-4주 (그래프 구축, 쿼리 파이프라인)
├── 인프라: Neo4j 또는 메모리 오버헤드
├── 유지보수: 규정 변경 시 그래프 동기화
└── 응답 지연: 그래프 탐색 추가 시간

대비 효과:
└── 5% 미만의 복잡한 질문 개선
```

---

### 사용자 만족도에 실제로 영향을 주는 것

| 요소 | 영향도 | 현재 상태 |
|------|--------|----------|
| **응답 속도** | ⭐⭐⭐⭐⭐ | ✅ 빠름 |
| **정확성 (할루시네이션 방지)** | ⭐⭐⭐⭐⭐ | ✅ 팩트체크로 강화됨 |
| **친절한 답변 톤** | ⭐⭐⭐⭐ | ✅ 프롬프트 개선됨 |
| **관련 조항 인용** | ⭐⭐⭐⭐ | ✅ 잘 됨 |
| **복잡한 관계 추론** | ⭐⭐ | △ 제한적 |

**사용자들은 "빠르고 정확한 답변"을 원하지, "그래프 탐색 기능"을 원하지 않습니다.**

---

## 결론

```
Graph RAG 도입 시:
- 개발 복잡도: ↑↑↑
- 유지보수 부담: ↑↑
- 응답 속도: ↓ (약간)
- 사용자 만족도: → (거의 변화 없음)
```

### 권장 대안: 점진적 도입

#### Phase 1: 경량 Ontology (즉시 적용 가능)
```json
// data/config/ontology.json
{
  "entities": {
    "교원": ["교수", "부교수", "조교수", "강사"],
    "학생": ["학부생", "대학원생", "휴학생"],
    "휴가": ["연차", "병가", "공가", "특별휴가"],
    "휴직": ["육아휴직", "병역휴직", "연구년"]
  },
  "relations": {
    "교원인사규정": {
      "참조": ["정관", "취업규칙"],
      "세부규정": ["교원연구년규정", "교원휴직규정"]
    }
  }
}
```
→ **쿼리 확장 시 활용** (현재 `intents.json` 확장)

#### Phase 2: 규정 간 참조 그래프 (중기)
```
[교원인사규정] --참조--> [정관 제X조]
[교원인사규정 제36조] --세부규정--> [교원휴직규정]
```
→ **"이 조항이 참조하는 다른 규정은?"** 질문 처리

#### Phase 3: 전체 Graph RAG (장기)
- Neo4j 또는 NetworkX 기반
- Microsoft GraphRAG 패턴 적용
- 복잡한 다중 홉 쿼리 지원

---

### 만족도를 높이는 다른 방법

1. **UI/UX 개선** - 후속 질문 제안, 관련 규정 링크
2. **답변 포맷팅** - 더 읽기 쉬운 형태
3. **피드백 수집** - 실제 사용자 불만 파악
4. **FAQ 자동 생성** - 자주 묻는 질문 빠른 응답

---

## 최종 권장

**Graph RAG는 "멋져 보이지만" ROI가 낮습니다.** 

현재 시스템을 더 안정화하고, 실제 사용자 피드백을 모은 후 필요성이 명확해지면 그때 도입하세요.

| 시점 | 권장 |
|------|------|
| **지금** | ❌ 과도한 복잡성 - 현재 시스템으로 대부분 커버 |
| **필요 시** | ✅ 경량 Ontology (entities/relations JSON) |
| **장기** | △ 규정 간 참조가 많아지면 Graph RAG 검토 |
