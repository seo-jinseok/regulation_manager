# Regulation JSON Schema Reference

This document defines the structure of the JSON output generated by the `regulation_manager`. The schema is designed to represent Korean legal regulations (laws, decrees, university rules) with full hierarchical fidelity, suitable for database ingestion.

## Root Object

The root of the JSON file represents a collection of documents (regulations) parsed from a single source file.

| Field | Type | Description |
| :--- | :--- | :--- |
| `file_name` | `string` | The name of the source HWP file. |
| `docs` | `Array<Document>` | A list of parsed regulation documents. |

## Document Object

Each object in the `docs` array represents a single distinct regulation (e.g., "School Rules", "Scholarship Regs").

| Field | Type | Description |
| :--- | :--- | :--- |
| `title` | `string` | The official title of the regulation (e.g., "동의대학교학칙"). |
| `part` | `string` | *(Optional)* The Book Part/Category if applicable (e.g., "제2편 학칙"). |
| `metadata` | `Object` | Processing metadata (scan date, source file). |
| `preamble` | `string` | Introductory text before the first article or chapter. |
| `content` | `Array<Node>` | The hierarchical body of the regulation (Chapters, Articles, etc.). |
| `addenda` | `Array<Node>` | Structured nodes representing the Addenda (부칙). |
| `attached_files` | `Array<Object>` | Appendices like Forms or Tables (별표/별지). |

## Node Object (Recursive)

The detailed content (in `content` and `addenda`) is represented as a tree of **Nodes**. Every structural element (Chapter, Section, Article, Paragraph, Item, Subitem) is a Node.

| Field | Type | Description |
| :--- | :--- | :--- |
| `level` | `string` | The structural level type. Enum: `chapter`, `section`, `subsection`, `article`, `paragraph`, `item`, `subitem`, `text`. |
| `number` | `string` | The identifier string (e.g., "1", "제5조", "①", "1.", "가."). Can be null. |
| `title` | `string` | The title of the node (e.g., "총칙", "목적"). Null if not present. |
| `text` | `string` | The text content of the node (excluding children). |
| `children` | `Array<Node>` | Nested child nodes. |

### Node Levels & Hierarchy

The hierarchy strictly follows this order (though levels can be skipped, e.g., Articles directly under Regulation):

1.  **`chapter` (장)**: High-level grouping.
2.  **`section` (절)**: Subdivision of a Chapter.
3.  **`subsection` (관)**: Subdivision of a Section.
4.  **`article` (조)**: The fundamental legal unit (e.g., "제1조").
5.  **`paragraph` (항)**: Numbered circle (①, ②) or implicit starting paragraph.
6.  **`item` (호)**: Numbered list item (1., 2.).
7.  **`subitem` (목)**: Alphabetic sub-list item (가., 나.).

### Examples

#### 1. Article with Paragraph
```json
{
  "level": "article",
  "number": "6",
  "title": "자산의 구분",
  "text": "",
  "children": [
    {
      "level": "paragraph",
      "number": "①",
      "text": "이 법인의 자산은 기본재산과 보통재산으로 구분한다.",
      "children": []
    }
  ]
}
```

#### 2. Item with Subitem
```json
{
  "level": "item",
  "number": "1.",
  "text": "교원 인사 관련 사항",
  "children": [
    {
      "level": "subitem",
      "number": "가.",
      "text": "신규 채용에 관한 사항",
      "children": []
    }
  ]
}
```

## Addenda Parsing

Addenda (부칙) are also structured as a list of Nodes, typically modeled as:
*   **Article-style items**: Numbered amendments (e.g., "1. (시행일) ...") are treated as `level: "article"`.
*   **Dates**: Simple enactment dates are treated as `level: "article"` or `text`.

```json
"addenda": [
  {
    "title": "부 칙",
    "children": [
      {
        "level": "article",
        "number": "1.",
        "text": "이 정관은 1981년 9월 11일부터 시행한다.",
        "children": []
      }
    ]
  }
]
```
