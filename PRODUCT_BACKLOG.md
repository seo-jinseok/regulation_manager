# Product Backlog (Web + MCP)

## Goal
사용자가 원하는 것을 **정확히 판단**하고 **근거와 함께 제공**한다.

## Scope
- Primary: Web UI
- Secondary: MCP integration
- CLI: internal testing only
- Update cadence: monthly

## Priorities
- P0: must-have for product-level usage
- P1: should-have (near-term)
- P2: nice-to-have

## Epics and User Stories

### E1. 의도/대상 자동 판단 (P0)
- US1 (P0): 사용자가 질문/검색 구분 없이 입력해도 적절한 모드가 자동 선택된다.
  - AC: 질문형 문장에 대해 Ask 모드로 자동 전환
  - AC: 규정명/조항 검색은 Search 모드로 자동 전환
- US2 (P0): 교수/학생/직원 대상 추정이 자동 수행된다.
  - AC: 상위 결과의 규정명이 대상과 일치하도록 가중
  - AC: 대상 불일치 시 자연스러운 경고 문구 제공
- US3 (P1): 모호한 질의는 대상 선택 UI로 후속 질문 유도
  - AC: 학생/교수/직원 선택 후 재검색
  - AC: 선택 결과가 상위 결과에 반영됨

### E2. 규정 "전문 보기" UX (P0)
- US4 (P0): "전문/전체" 요청 시 규정 단위 뷰 제공
  - AC: 목차 트리 + 본문 패널 제공
  - AC: 부칙/별표 분리 표시
  - AC: 경로 중복/공백 변형 중복 제거
- US5 (P1): 규정 내 검색 (조항 번호, 키워드) 지원
  - AC: 조항 번호 이동
  - AC: 키워드 하이라이트

### E3. 근거 중심 답변 포맷 (P0)
- US6 (P0): 답변은 반드시 근거 조항과 함께 표시
  - AC: 규정명/조항 번호가 항상 표기됨
  - AC: 근거가 없으면 “근거 없음” 상태로 처리
- US7 (P1): 출처 클릭 시 해당 조항으로 스크롤 이동

### E4. 최신성/버전 표시 (P1)
- US8 (P1): 검색 결과에 최신 업데이트 정보 노출
  - AC: 규정집 갱신 일자 표시
  - AC: 월 1회 업데이트 시점 기록
- US9 (P2): 변경 이력(diff) 요약 제공

### E5. 피드백 기반 개선 루프 (P1)
- US10 (P1): 검색 결과 피드백 수집
  - AC: 긍정/중립/부정 선택 가능
  - AC: 부정 시 원인 옵션 제공
- US11 (P2): 피드백 통계 대시보드 제공

### E6. MCP 응답 스키마 안정화 (P0)
- US12 (P0): MCP 결과에 규정명/경로/근거 일관 표기
  - AC: path 정규화 및 중복 제거
- US13 (P1): 모호 질의 시 “clarification” 응답 반환

### E7. 성능/신뢰성 (P1)
- US14 (P1): 쿼리 리라이팅 및 검색 캐시
- US15 (P2): 규정별 인덱스 빌드 시간 측정/튜닝

## Release Phases
1) MVP 강화 (P0)
   - E1, E2, E3, E6
2) 운영 안정화 (P1)
   - E4, E5, E7
3) 고도화 (P2)
   - 변경 이력, 대시보드, 추가 UX 개선

## Success Metrics
- 1차 답변 해결률 (재질문 없이 종료)
- 대상 불일치율
- 근거 조항 클릭률
- 검색 실패율 (결과 0)
- 업데이트 반영 시간
