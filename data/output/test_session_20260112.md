# RAG 품질 테스트 세션 보고서

**날짜**: 2026-01-12  
**테스터**: AI Agent (엄격 모드)

---

## 1. 시작 상태

| 항목 | 값 |
|------|---|
| 정적 테스트 통과율 | 100% (50/50) |
| 규정 수 | 318개 |
| 조항 수 | 17,254개 |
| LLM Provider | lmstudio (eeve-korean-instruct-7b-v2.0-preview-mlx) |

---

## 2. 동적 테스트 결과

### 2.1 테스트한 페르소나

| 페르소나 | 쿼리 수 | 성공 | 부분성공→실패 | 실패 |
|----------|---------|------|--------------|------|
| 🎓 신입생 | 3 | 0 | 1 | 2 |
| 🎓 대학원생 | 3 | 1 | 1 | 1 |
| 👨‍🏫 신임교수 | 3 | 0 | 0 | 3 |
| 🤕 어려운 상황 학생 | 3 | 0 | 1 | 2 |
| 😡 불만있는 구성원 | 3 | 0 | 3 | 0 |
| **합계** | **15** | **1** | **6** | **8** |

### 2.2 난이도별 분포

| 난이도 | 쿼리 수 | 성공 | 실패 |
|--------|---------|------|------|
| 쉬움 (30%) | 5 | 0 | 5 |
| 중간 (40%) | 5 | 1 | 4 |
| 어려움 (30%) | 5 | 0 | 5 |

### 2.3 성공률

- **엄격 모드 성공률**: **6.7%** (1/15) ❌
- **목표**: 80%
- **결과**: **목표 미달** (-73.3%p)

---

## 3. 유일한 성공 케이스

### 대학원생 - "연구년 신청 자격이 어떻게 돼?" (점수: 4.6/5.0)

**팩트체크 통과 항목:**
- ✅ "6년 이상 재직한 자" - 교원연구년제규정 제3조 ①항 확인
- ✅ "6개월 이하 연구년: 3년 이상 재직" - 규정과 일치
- ✅ "6개월 초과 1년 이하: 6년 이상 재직" - 규정과 일치

**성공 요인:**
- 검색 결과가 정확한 규정 조항 반환
- LLM이 검색 결과를 그대로 인용
- 가짜 전화번호 생성 안 함

---

## 4. 주요 실패 유형 분석

| 실패 유형 | 발생 횟수 | 비율 | 심각도 |
|----------|----------|------|--------|
| **HALLUCINATION** | 10회 | 67% | Critical |
| WRONG_FACT | 4회 | 27% | Critical |
| GENERIC_ANSWER | 4회 | 27% | High |
| INCOMPLETE | 3회 | 20% | Medium |
| IRRELEVANT | 3회 | 20% | High |

### 4.1 HALLUCINATION 상세

**가짜 전화번호 생성 (10회 이상)**
- "02-XXXX-XXXX", "02-1234-5678" 등 존재하지 않는 번호 다수 생성
- 모든 페르소나에서 발생

**존재하지 않는 규정 내용 생성**
- "연구실적 40%, 교육실적 30%" - 승진 심사 비율 (허위)
- "1차 서류심사(매년 3월)" - 승진 일정 (허위)
- "사후 14일 이내" - 성적이의신청 기간 (허위)
- "경고 1회 = 학점 제한" - 학사경고 기준 (다른 학교 규정)

### 4.2 GENERIC_ANSWER 상세

- "대학마다 상이할 수 있습니다" - 동의대학교 규정이 있는데도 회피
- "학교마다 차이가 있을 수 있음" - 일반론으로 답변

---

## 5. 품질 점수 상세

| 항목 | 평균 점수 | 목표 | 상태 |
|------|----------|------|------|
| 정확성 | 2.0/5.0 | 4.0 | ❌ |
| 완전성 | 2.3/5.0 | 4.0 | ❌ |
| 관련성 | 3.0/5.0 | 4.0 | ⚠️ |
| 출처 명시 | 2.2/5.0 | 4.0 | ❌ |
| 실용성 | 1.9/5.0 | 4.0 | ❌ |
| **전체 평균** | **2.5/5.0** | **4.0** | ❌ |

---

## 6. 근본 원인 분석

### 6.1 LLM 모델 한계
- eeve-korean-instruct-7b 모델이 **할루시네이션에 취약**
- 검색 결과에 없는 내용도 자신있게 생성
- 가짜 전화번호, 날짜, 비율 등 구체적 수치 지어냄

### 6.2 프롬프트 엔지니어링 부족
- "모르면 모른다고 답변하라" 지침 미흡
- "규정에 명시된 내용만 답변하라" 강제 부족
- 전화번호/연락처 생성 금지 지침 없음

### 6.3 검색-답변 연결 약함
- 검색 결과가 있어도 LLM이 이를 무시하고 일반론 생성
- 컨텍스트 활용도 낮음

---

## 7. 권장 개선사항

### 7.1 시급 (Critical)

| 유형 | 내용 | 예상 효과 |
|------|------|----------|
| `architecture` | LLM 시스템 프롬프트에 "전화번호 생성 금지" 추가 | HALLUCINATION 50% 감소 |
| `architecture` | "규정에 없는 내용은 '확인 필요'로 답변" 지침 | WRONG_FACT 감소 |
| `architecture` | "다른 학교 사례 인용 금지" 지침 | GENERIC_ANSWER 감소 |

### 7.2 중요 (High)

| 유형 | 내용 | 파일 |
|------|------|------|
| `prompt` | Few-shot 예시 추가 (좋은 답변 vs 나쁜 답변) | 프롬프트 템플릿 |
| `intent` | 휴학-장학금, 보직-혜택 연계 인텐트 | `intents.json` |
| `synonym` | 전임교원 책임시수, 보직수당 동의어 | `synonyms.json` |

### 7.3 고려 (Medium)

| 유형 | 내용 |
|------|------|
| 모델 교체 | 더 큰 모델 또는 instruction-following 능력이 강한 모델로 교체 |
| Post-processing | 답변에서 "02-XXXX" 패턴 자동 제거/경고 |
| Grounding 강화 | 검색 결과에서 직접 인용 강제 |

---

## 8. 최종 결론

| 메트릭 | 결과 | 목표 | 상태 |
|--------|------|------|------|
| 정적 테스트 통과율 | 100% | ≥85% | ✅ |
| 동적 쿼리 성공률 | **6.7%** | ≥80% | ❌ |
| 답변 품질 점수 | 2.5/5.0 | ≥4.0 | ❌ |
| 회귀 발생 | 0건 | 0건 | ✅ |

### 결론

**시스템 상태: ⛔ 품질 미달**

정적 테스트(규칙 기반)는 100% 통과하나, 실제 사용자 시나리오에서 LLM이 **심각한 할루시네이션**을 보임. 
현재 상태로는 프로덕션 배포 **불가**.

### 다음 단계

1. **즉시**: LLM 프롬프트에 할루시네이션 방지 지침 추가
2. **단기**: 더 큰 모델 또는 다른 모델로 A/B 테스트
3. **중기**: Retrieval Augmented Generation 파이프라인 강화 (답변 시 검색 결과 강제 인용)

---

*Generated by RAG Quality Test Agent - 2026-01-12*
