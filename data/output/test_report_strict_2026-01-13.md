# RAG 시스템 품질 심층 테스트 보고서 (Strict Mode)

**실행 일시**: 2026-01-13
**테스터**: Antigravity Agent (Strict Mode)

---

## 1. 개요
*   **목표**: 페르소나 기반 동적 쿼리 및 멀티턴 대화 테스트를 통한 엄격한 품질 검증
*   **선택된 페르소나**: 🎓 신입생, 👨‍🏫 교수, 👪 학부모
*   **전체 성공률**:
    *   **정적 평가**: 100% (50/50) ✅
    *   **동적 쿼리**: 33% (3/9) ❌ (목표 80%)
    *   **멀티턴 대화**: 실패 (Context Loss) ❌

## 2. Phase 1: 정적 평가 결과
*   **통과율**: 100.0%
*   **의도 인식**: 100.0%
*   **비고**: 사전에 정의된 데이터셋에 대해서는 완벽하게 작동함. (Overfitting 가능성)

## 3. Phase 2 & 3: 동적 쿼리 세부 결과

### 🎓 페르소나: 신입생
| 쿼리 | 난이도 | 결과 | 팩트체크/원인 |
|------|--------|------|--------------|
| "기숙사 신청 언제까지야?" | Easy | ⚠️ Partial | 규정 19조/14조 인용했으나 구체적 기간 부재 (규정 한계) |
| "재수강하면 학점 어떻게 돼?" | Medium | ✅ Success | 재수강 규정 4조/7조 (B+ 상한, 이전 성적 삭제) 정확히 인용 |
| "학교 적응이 힘든데 자퇴하고 등록금 환불 받을 수 있어?" | Hard | ❌ Fail | **오답/누락**: 자퇴 절차는 안내했으나, 입학금 및 등록금 반환 규정을 찾지 못하고 "내용 없음"으로 답변 |

### 👨‍🏫 페르소나: 교수
| 쿼리 | 난이도 | 결과 | 팩트체크/원인 |
|------|--------|------|--------------|
| "연구년 신청 자격 요건이 어떻게 됩니까?" | Easy | ✅ Success | 교원연구년제규정 제3조 정확히 인용 |
| "산학협력단 겸직 교원의 경우 책임시수 감면이 가능합니까?" | Medium | ❌ Fail | **답변 생성 실패** (System Error/Timeout) |
| "교원 업적 평가 이의 신청 절차는?" | Hard | ❌ Fail | **Hallucination**: 교원 업적 평가 규정 대신 '성적평가규정(학생용)'을 참조하여 답변 |

### 👪 페르소나: 학부모
| 쿼리 | 난이도 | 결과 | 팩트체크/원인 |
|------|--------|------|--------------|
| "등록금 납부 기한 지났는데 추가 납부 가능한가요?" | Easy | ❌ Fail | **Misinterpretation**: '추가 납부'를 '추가 학기 등록금'으로 오해하여 엉뚱한 규정(계약학과 제16조) 인용 |
| "부모가 군휴학 대리 신청 가능한가요?" | Medium | ⚠️ Partial | 명시적 규정 없음으로 답변 (사실일 가능성 높으나 확인 필요) |
| "기숙사 민원 접수 방법은?" | Hard | ❌ Fail | **답변 생성 실패** (System Error/Timeout) |

## 4. Phase 4: 멀티턴 대화 테스트
*   **시나리오**: 교수 연구년 신청
*   **Turn 1**: "연구년 신청 자격?" → ✅ 성공
*   **Turn 2**: "신청 시기는?" → ✅ 성공 (문맥 유지)
*   **Turn 3**: "선정 안되면 재신청 되나?" → ❌ **실패 (Context Loss)**
    *   갑자기 '연구년'이 아닌 **'학·석사연계과정'** 규정을 인용하며 동문서답함.
    *   원인: '선정', '재신청' 등의 키워드가 학생 규정 쪽에 더 많아 검색 편향 발생 추정.

## 5. 종합 결론 및 개선 제언

**🔴 주요 문제점**
1.  **키워드 모호성 처리 부족**: "반환"(등록금 반환 규정 놓침), "추가 납부"(추가 학기로 오해) 등 사용자의 의도를 정확한 규정 용어로 매핑하지 못함.
2.  **멀티턴 맥락 유지 취약**: 대화가 길어질수록 이전 주제(연구년)보다 현재 쿼리의 키워드 매칭(재신청)이 우선순위를 점령하여 주제 이탈 발생.
3.  **검색 범위 제한 실패**: '교수' 페르소나 질문에 '학생' 규정(성적이의신청, 학석사연계)을 가져오는 등 청중(Audience) 필터링이 작동하지 않음.

**🔧 개선 제안**
1.  **동의어/인텐트 보강**: `synonyms.json`에 `자퇴 반환 -> 등록금 반환 규정`, `추가 납부 -> 추가 등록` 등 매핑 추가.
2.  **페르소나 필터 강화**: 질의 분석 시 '교수' 관련 키워드가 감지되면 학생용 규정 검색 점수를 낮추거나 필터링하는 로직(`code_audience`) 강화 필요.
3.  **멀티턴 쿼리 재작성 개선**: Turn 3 쿼리 생성 시 "연구년 선정 안되면..." 처럼 명시적 주어를 포함하도록 쿼리 변환 프롬프트 튜닝 필요.
